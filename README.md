线上剧本杀平台系统 完整产品说明书
目录
1.  [产品概述]
2.  [系统安装与部署指南]
3.  [用户端功能详细操作指南]
4.  [管理员端后台操作指南]
5.  [系统安全与运维规范]
6.  [常见问题与解决方案]
7.  [附录]

1 产品概述
1.1 产品定位
本产品是一款**支持AI角色互动的轻量化线上剧本杀服务平台**，针对线下剧本杀凑局难、时间成本高、新手门槛高、场地限制大的核心痛点，实现单人即可沉浸式体验完整剧本杀全流程，同时配套完善的用户体系、UGC剧本创作能力与垂直社交功能，打造「创作-体验-交流」的剧本杀全生态平台。

 1.2 核心价值
核心能力	价值说明
单人剧本杀闭环	无需凑局，AI 接管非玩家角色，单人即可完成从选本到复盘的完整剧本杀体验
拟人化 AI 互动	基于大模型能力，AI 角色严格遵循人设与剧情发言，还原线下圆桌讨论氛围
零门槛 UGC 创作	可视化剧本编辑器，零基础即可完成剧本全要素创作，支持草稿保存与一键发布
全场景适配	适配 PC 端、移动端多终端，支持碎片化时间体验，随时存档、断点续玩
标准化玩法流程	严格遵循线下剧本杀行业标准，分幕叙事、线索解锁、推理讨论、投票复盘全流程还原

1.3 适用场景
1.  单人玩家碎片化剧本杀体验，解决线下凑局难的问题
2.  剧本杀新手入门学习，低门槛熟悉剧本杀玩法流程
3.  剧本创作者快速创作、测试、发布原创剧本，搭建个人作品集
4.  剧本杀门店线上引流，配套线下剧本做前置新手体验
5.  多人轻量线上联机剧本杀体验（扩展功能）

1.4 系统运行环境要求
1.4.1 服务器环境要求
环境类型	最低配置	推荐生产配置
操作系统	Linux CentOS 7+/Ubuntu 18.04+	Linux CentOS 7.9
CPU	2 核	4 核 8 线程
内存	4G	8G
硬盘	40G SSD	100G SSD
数据库	MySQL 5.7+	MySQL 8.0
JDK	JDK 1.8	JDK 17
Node.js	Node.js 14.x	Node.js 18.x
Web 服务器	Nginx 1.18+	Nginx 1.24+

1.4.2 用户端终端要求
终端类型	适配要求
PC 端浏览器	Chrome 90+、Edge 90+、Firefox 88+、Safari 14+
移动端	微信内置浏览器、手机 Chrome/Safari、uniapp 打包安卓 /iOS APP
网络要求	带宽≥2Mbps，支持 4G/5G/WiFi 网络

系统整体架构
架构层级	核心职责	推荐技术栈
前端展示层	页面渲染、用户交互、游戏流程控制、AI 对话展示	Vue3/React、uniapp（多端适配）、Element UI
应用服务层	业务逻辑处理、权限校验、AI 接口调度、游戏状态管理、数据封装	SpringBoot/Node.js、MyBatis-Plus、JWT
数据持久层	数据存储与读取、事务管理、索引优化，支撑全业务数据流转	MySQL 5.7+/8.0+
基础设施层	AI 能力支撑、文件存储、日志监控、安全防护	主流大模型 API、OSS 对象存储、日志框架

2 系统安装与部署指南
2.1 部署前环境准备
1.  准备符合要求的Linux服务器，开放80、443、3306、8080端口，关闭防火墙不必要的拦截
2.  服务器完成JDK、Node.js、MySQL、Nginx环境安装，验证环境可用性：
    # 验证JDK
    java -version
    # 验证Node.js
    node -v
    # 验证MySQL
    mysql -V
    # 验证Nginx
    nginx -v
    ```
3.  申请AI大模型API密钥（通义千问、文心一言、ChatGPT等）、OSS对象存储密钥（用于头像、剧本封面、线索图片存储）
4.  下载平台完整安装包，包含后端项目、前端项目、数据库SQL脚本三大模块

2.2 数据库部署与初始化
2.2.1 数据库创建
1.  登录MySQL数据库，执行以下语句创建数据库：
    
    CREATE DATABASE IF NOT EXISTS jubensha 
    DEFAULT CHARACTER SET utf8mb4 
    COLLATE utf8mb4_unicode_ci;
   
2.  执行以下语句验证数据库创建成功：

    SHOW DATABASES LIKE 'jubensha';

2.2.2 表结构与数据初始化
1.  切换到目标数据库：
    ```sql
    USE jubensha;
    ```
2.  按顺序执行SQL脚本：
    - 第一步：执行`01-create-tables.sql`，完成用户、剧本、游戏等所有核心表的创建
    - 第二步：执行`02-init-test-data.sql`，完成测试用户、测试剧本、基础配置数据的初始化
    - 第三步：执行`03-index-optimize.sql`，完成索引创建与字段优化
3.  执行以下语句验证表结构初始化成功：
    ```sql
    SHOW TABLES;
    ```
4.  可选操作：执行`04-admin-init.sql`，创建超级管理员账号

2.3 后端服务部署
1.  解压后端项目压缩包，修改配置文件`application.yml`：
   
    ```# 数据库连接配置
spring:
  datasource:
    url: jdbc:mysql://服务器IP:3306/jubensha?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: 数据库账号
    password: 数据库密码
  # AI大模型配置
  ai:
    api-key: 你的大模型API密钥
    base-url: 大模型接口地址
    model: 选用的大模型版本
  # OSS对象存储配置
  oss:
    endpoint: OSS服务地址
    access-key: 你的OSS access-key
    secret-key: 你的OSS secret-key
    bucket-name: 存储桶名称
# 服务端口配置
server:
  port: 8080
  servlet:
    context-path: /api
# JWT密钥配置
jwt:
  secret: 自定义JWT加密密钥
  expire: 86400000

2.  执行Maven打包命令，生成可执行jar包：
mvn clean package -Dmaven.test.skip=true

3.  将打包生成的`jubensha-admin.jar`上传到服务器`/home/jubensha/`目录
4.  执行启动命令，启动后端服务：
    ```bash
    # 后台启动服务，并输出日志到文件
    nohup java -jar /home/jubensha/jubensha-admin.jar > /home/jubensha/server.log 2>&1 &
    ```
5.  验证服务启动成功：
    ```bash
    # 查看服务进程
    ps -ef | grep jubensha-admin.jar
    # 查看接口是否可访问
    curl http://127.0.0.1:8080/api/health
    ```
    接口返回`success`即表示后端服务部署成功。

### 2.4 前端项目部署
1.  解压前端项目压缩包，修改环境配置文件`.env.production`：
    ```env
    # 后端接口基础地址
    VITE_API_BASE_URL = http://服务器IP:8080/api
    # 项目名称
    VITE_APP_TITLE = 线上剧本杀平台
    # OSS文件访问基础地址
    VITE_OSS_BASE_URL = 你的OSS文件访问域名
    ```
2.  安装项目依赖：
    ```bash
    npm install
    ```
3.  执行生产环境打包命令：
    ```bash
    npm run build
    ```
4.  打包完成后，将生成的`dist`文件夹内所有文件，上传到服务器`/usr/share/nginx/html/jubensha/`目录
5.  配置Nginx反向代理，修改Nginx配置文件`/etc/nginx/nginx.conf`：
    ```nginx
    server {
        listen       80;
        server_name  你的域名/服务器IP;
        root         /usr/share/nginx/html/jubensha;
        index        index.html index.htm;

        # 前端路由history模式适配
        location / {
            try_files $uri $uri/ /index.html;
        }

        # 后端接口反向代理
        location /api/ {
            proxy_pass http://127.0.0.1:8080/api/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        # 静态资源缓存配置
        location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
            expires 7d;
        }
    }
    ```
6.  重启Nginx服务，使配置生效：
    ```bash
    nginx -t
    nginx -s reload
    ```

2.5 部署结果验证
1.  在浏览器输入服务器IP/绑定的域名，可正常访问平台前端首页
2.  使用测试账号（见附录）可正常登录平台
3.  可正常查看剧本列表、进入测试剧本、完成游戏流程
4.  管理员账号可正常登录后台管理系统，所有功能模块可正常访问

---

3 用户端功能详细操作指南
3.1 账号注册与登录
3.1.1 账号注册
1.  进入平台首页，点击右上角【注册】按钮，进入注册页面
2.  填写注册信息：
    - 用户名：4-20位字符，支持中英文、数字，不可与已有用户重复
    - 手机号：11位有效手机号，接收并填写短信验证码
    - 登录密码：6-20位字符，需包含字母与数字，二次确认密码
3.  勾选《用户服务协议》与《隐私政策》，点击【立即注册】
4.  系统提示注册成功后，自动跳转到登录页面

3.1.2 账号登录
平台支持两种登录方式，可按需选择：
1.  **账号密码登录**：
    - 输入注册的用户名/手机号，填写登录密码
    - 点击【登录】按钮，验证通过后进入平台首页
2.  **短信验证码登录**：
    - 输入绑定的手机号，点击【获取验证码】，填写收到的短信验证码
    - 点击【登录】按钮，验证通过后进入平台首页

 3.1.3 密码找回
1.  登录页面点击【忘记密码】，进入密码找回页面
2.  输入绑定的手机号，获取并填写短信验证码
3.  设置新密码，二次确认新密码，点击【确认重置】
4.  重置成功后，使用新密码登录平台即可

3.2 个人中心操作
3.2.1 个人资料编辑
1.  登录平台后，点击右上角头像，下拉菜单选择【个人中心】
2.  进入个人资料页面，可编辑以下信息：
    - 基础信息：昵称、头像、性别、生日、所在城市、个人简介
    - 偏好设置：爱好剧本类型（可多选）
    - 账号安全：修改登录密码、更换绑定手机号
3.  编辑完成后，点击【保存修改】，系统实时更新个人资料

3.2.2 我的玩本记录
1.  个人中心点击【我的玩本】，进入玩本记录页面
2.  页面按时间倒序展示所有已完成的剧本游戏，包含：剧本封面、名称、玩本时间、体验时长、投票结果
3.  支持以下操作：
    - 点击单条记录，可查看本局游戏详情、剧情复盘、对话记录
    - 对未评价的剧本，点击【去评价】可快速跳转到评价页面
    - 可添加自定义备注，记录玩本心得

3.2.3 我的浏览与收藏
1.  **浏览历史**：个人中心点击【浏览历史】，可查看所有浏览过的剧本、用户主页，支持单条删除、一键清空历史记录
2.  **我的收藏**：个人中心点击【我的收藏】，可查看所有收藏的剧本，点击剧本卡片可快速进入剧本详情页，支持取消收藏

 3.2.4 我的评价与关注
1.  **我的评价**：个人中心点击【我的评价】，集中展示所有发布的剧本评分与评价，支持编辑、删除评价内容
2.  **我的关注**：个人中心点击【我的关注】，可查看关注列表与粉丝列表，支持取消关注、移除粉丝、点击头像进入对方个人主页

3.3 剧本选择与游戏开启
3.3.1 剧本筛选与查找
1.  平台首页点击【剧本库】，进入全量剧本列表页面
2.  可通过以下方式筛选剧本：
    - 类型筛选：点击顶部类型标签（硬核推理、情感沉浸、阵营机制、恐怖惊悚、欢乐搞笑等）
    - 条件筛选：通过侧边筛选栏，选择游玩人数、难度等级、评分区间、发布时间
    - 关键词搜索：在顶部搜索框输入剧本名称/关键词，点击搜索按钮精准查找
3.  剧本列表按综合排序展示，可切换为「最新发布」「评分最高」「玩本最多」排序方式

3.3.2 剧本详情查看
1.  点击剧本卡片，进入剧本详情页，可查看以下信息：
    - 基础信息：剧本封面、名称、适配人数、难度、类型标签、平均评分、玩本人次、预计时长
    - 剧本简介：完整的剧本背景故事介绍
    - 角色列表：剧本内所有角色的头像、名称、基础背景介绍
    - 玩家评价：其他用户发布的评分与评价内容
2.  详情页可执行操作：点击【收藏】按钮收藏剧本、点击【分享】按钮分享剧本、点击【开始游戏】按钮进入对局

3.3.3 角色选择与游戏创建
1.  剧本详情页点击【开始游戏】，进入角色选择页面
2.  页面展示剧本内所有角色，标注「玩家可选」与「AI接管」，点击角色卡片可查看完整人物背景
3.  选择想要体验的玩家角色，点击【确认选择】按钮
4.  系统自动创建游戏对局，完成游戏初始化，进入游戏页面

 3.4 剧本杀游戏全流程操作
平台标准化游戏流程：**公共背景阅读→分幕剧情体验→投票指凶→结局复盘**，具体操作如下：

3.4.1 公共背景阅读
1.  游戏创建完成后，首先进入【故事背景】阶段
2.  页面展示剧本完整公共背景故事，阅读完成后，点击【已阅读完毕，进入游戏】按钮
3.  系统自动切换到第一幕，开启正式剧情体验

3.4.2 分幕剧情体验（核心环节）
每幕流程固定为「剧情阅读→线索解锁→互动讨论→进入下一幕」，循环推进：
1.  **剧情阅读**
    - 进入对应幕次后，首先展示【公共剧情】，阅读完成后切换到【我的专属剧情】
    - 专属剧情仅当前玩家角色可见，包含角色的隐藏信息、任务、视角内容
    - 阅读完成所有剧情后，点击【已阅读完毕，解锁线索】按钮
2.  **线索查看**
    - 剧情阅读完成后，自动解锁当前幕次的所有线索，分为【公开线索】与【我的私密线索】
    - 公开线索全角色可见，私密线索仅当前玩家可查看，点击线索卡片可查看完整线索描述与线索图片
    - 所有线索查看完成后，点击【进入讨论环节】按钮
3.  **互动讨论**
    - 进入讨论环节后，页面底部出现聊天输入框，可输入文字向AI角色发起提问、讨论、质疑
    - 发送消息后，AI角色会基于自身人设、剧本剧情、已解锁线索进行实时回复，还原线下圆桌讨论氛围
    - 所有对话内容按时间倒序展示，标注发言人角色与头像，支持随时回溯查看
    - 完成讨论后，点击【结束本幕，进入下一幕】按钮，系统自动切换到下一幕，重复上述流程

3.4.3 投票指凶
1.  完成所有幕次的剧情、线索、讨论环节后，系统自动进入【投票指凶】阶段
2.  页面展示剧本内所有嫌疑人角色列表，选择你认定的凶手角色
3.  确认选择后，点击【提交投票结果】按钮，投票结果不可修改

3.4.4 结局与真相复盘
1.  投票提交后，系统基于投票结果，展示对应的结局内容，包含结局名称、完整结局故事
2.  结局阅读完成后，点击【查看完整真相复盘】按钮，解锁剧本全部真相：
    - 凶手身份与完整作案手法
    - 人物隐藏关系与剧情伏笔解析
    - 关键线索与作案逻辑对应说明
    - 剧本背后的故事与立意
3.  复盘阅读完成后，点击【结束游戏】按钮，本局游戏完成，系统自动归档玩本记录，跳转到评价页面

 3.4.5 游戏存档与断点续玩
1.  游戏过程中，系统实时自动存档，无需手动操作，中途退出不会丢失进度
2.  再次进入平台后，首页会展示【进行中的游戏】卡片，点击【继续游戏】按钮，即可回到退出前的游戏进度
3.  个人中心【我的玩本】-【进行中】，可查看所有未完成的游戏对局，支持继续游戏或放弃对局

3.5 社交互动操作
 3.5.1 用户关注与互动
1.  进入对方用户个人主页，点击【关注】按钮，即可完成关注
2.  双方互相关注后成为好友，可在首页接收对方的动态更新
3.  关注后，可在对方主页查看其公开的玩本记录、原创作品、发布的评价内容

3.5.2 剧本评价与互动
1.  游戏结束后，自动跳转到剧本评价页面，也可在剧本详情页点击【写评价】进入
2.  选择1-5分星级评分，填写文字评价内容，点击【发布评价】按钮即可完成发布
3.  评价发布后，会展示在剧本详情页的评价列表中，其他用户可对评价进行点赞互动

 3.6 UGC剧本创作操作
3.6.1 新建剧本创作
1.  平台首页点击【创作中心】，进入剧本创作页面
2.  点击【新建剧本】按钮，弹出创建窗口，填写剧本基础信息：剧本名称、类型、适配人数、难度
3.  点击【创建】按钮，生成剧本草稿，进入可视化创作编辑器

3.6.2 剧本全要素编辑
编辑器左侧为编辑导航栏，按流程完成所有模块编辑即可：
1.  **基础信息编辑**
    - 填写剧本完整简介、预计时长、剧本标签、完整真相复盘内容
    - 上传剧本封面图，点击【保存】按钮完成基础信息配置
2.  **角色管理**
    - 点击【添加角色】按钮，填写角色名称、人物背景，上传角色头像
    - 设置角色类型：玩家可选/AI接管，单人剧本仅可设置1个玩家可选角色
    - 支持编辑、删除角色，所有角色编辑完成后点击【保存】
3.  **分幕剧情编辑**
    - 点击【添加幕次】按钮，填写幕名称、幕序号、公共剧情/主持人台词
    - 为每个角色配置对应幕次的专属剧本内容，确保每个角色都有完整的分幕剧情
    - 支持调整幕次顺序、编辑/删除幕次，编辑完成后点击【保存】
4.  **线索配置**
    - 点击【添加线索】按钮，填写线索名称、线索描述，上传线索图片
    - 设置线索属性：公开/私密线索、解锁幕次、所属角色（私密线索需绑定）
    - 支持编辑、删除线索，配置完成后点击【保存】
5.  **结局配置**
    - 点击【添加结局】按钮，填写结局名称、结局内容
    - 设置结局触发条件：投票给对应角色时触发
    - 支持编辑、删除结局，配置完成后点击【保存】

3.6.3 草稿保存与发布
1.  编辑过程中，系统实时自动保存草稿，无需手动操作，关闭页面后可在创作中心继续编辑
2.  所有模块编辑完成后，点击编辑器右上角【预览】按钮，可模拟玩家视角体验完整剧本流程
3.  预览确认无误后，点击【发布】按钮，提交平台审核
4.  审核通过后，剧本正式发布到平台剧本库，全平台用户可查看、体验

3.6.4 创作作品管理
1.  创作中心页面，分为【草稿】与【已发布】两个标签页
2.  草稿页：展示所有未完成的剧本草稿，支持继续编辑、删除草稿
3.  已发布页：展示所有已发布的剧本，可查看作品数据（游玩次数、评分、评价），支持编辑更新、下架作品

---

4 管理员端后台操作指南
4.1 管理员登录与后台概览
1.  管理员通过平台域名+/admin路径，进入后台管理系统登录页面
2.  输入管理员账号、密码与验证码，点击【登录】按钮，验证通过后进入后台首页
3.  后台首页为数据概览看板，展示平台核心运营数据：
    - 核心指标：注册用户总数、今日新增用户、活跃用户数、剧本总数、今日对局数
    - 数据趋势：近7日用户增长趋势、对局数量趋势
    - 待办事项：待审核剧本、待处理违规举报、异常账号提醒

4.2 用户管理
1.  左侧导航栏点击【用户管理】-【用户列表】，进入用户管理页面
2.  页面展示全平台用户列表，包含用户ID、用户名、手机号、注册时间、等级、账号状态等信息
3.  支持按用户名、手机号、注册时间、账号状态筛选查询用户
4.  可执行操作：
    - 查看用户详情：点击【详情】，查看用户完整资料、玩本记录、创作作品
    - 编辑用户信息：点击【编辑】，可修改用户基础信息、等级、经验值
    - 账号状态管理：对违规账号，可执行【禁用】操作，禁用后用户无法登录平台；可对已禁用账号执行【解禁】操作
    - 账号重置：可重置用户登录密码、解绑手机号

4.3 剧本内容管理
1.  左侧导航栏点击【剧本管理】-【剧本列表】，进入剧本管理页面
2.  页面展示全平台所有剧本，包含剧本ID、名称、作者、发布时间、游玩次数、评分、状态等信息
3.  支持按剧本名称、作者、类型、发布时间、状态筛选查询剧本
4.  可执行操作：
    - 查看剧本详情：点击【详情】，查看剧本完整内容、角色、幕次、线索、结局配置
    - 编辑剧本内容：点击【编辑】，可修改剧本基础信息、上下线状态
    - 剧本上下线：对优质剧本执行【上线】操作，对违规/低质剧本执行【下线】操作，下线后用户无法查看与体验
    - 剧本置顶：可设置首页推荐位、热门榜单置顶剧本
    - 数据查看：点击【数据】，查看剧本游玩数据、完玩率、评分趋势、评价内容

### 4.4 内容审核管理
1.  **剧本审核**
    - 左侧导航栏点击【审核管理】-【剧本审核】，进入审核页面
    - 页面展示所有用户提交的待审核剧本，点击【查看】可查看剧本完整内容
    - 审核操作：内容合规无违规，点击【审核通过】，剧本正式上线；内容存在违规/不符合规范，点击【审核驳回】，填写驳回原因，退回给创作者修改
2.  **内容合规审核**
    - 【评价审核】：查看用户发布的所有剧本评价，对违规评价执行【删除】【屏蔽】操作
    - 【用户资料审核】：查看用户头像、昵称、个人简介，对违规内容执行【重置】【禁用账号】操作
    - 【举报处理】：处理用户提交的举报内容，核实后对违规账号/内容执行对应处罚操作

### 4.5 系统配置管理
1.  左侧导航栏点击【系统管理】-【配置管理】，进入系统配置页面
2.  可配置内容：
    - 首页配置：首页轮播图、推荐剧本、热门榜单规则配置
    - 用户体系配置：用户等级规则、经验值获取规则、等级权益配置
    - AI配置：大模型接口参数、AI角色发言规则、对话上限配置
    - 内容规则：剧本审核规范、违规内容关键词库配置
3.  配置修改完成后，点击【保存配置】，系统实时生效

### 4.6 数据统计管理
1.  左侧导航栏点击【数据统计】，可查看多维度平台数据报表
2.  核心报表模块：
    - 用户数据报表：新增用户、活跃用户、留存率、用户画像数据
    - 剧本数据报表：剧本游玩数据、完玩率、评分分布、热门剧本排行
    - 运营数据报表：对局总数、人均游玩时长、功能使用率、UGC创作数据
3.  支持按时间维度筛选数据，支持报表导出为Excel文件

---

## 5 系统安全与运维规范
### 5.1 系统安全规范
1.  **账号安全规范**
    - 用户密码采用BCrypt不可逆加密算法存储，禁止明文存储密码，管理员无法查看用户明文密码
    - 管理员账号采用强密码规则，定期更换密码，开启双因素认证，禁止多人共用一个管理员账号
    - 接口采用JWT鉴权机制，设置合理的token过期时间，禁止越权访问与未授权接口调用
2.  **数据安全规范**
    - 所有核心表均采用逻辑删除，禁止物理删除核心业务数据，避免数据不可逆丢失
    - 用户敏感信息（手机号、真实姓名）脱敏展示，禁止全量明文展示与导出
    - 数据库禁止外网直接访问，仅开放服务器内网访问权限，设置数据库账号最小权限原则
3.  **代码与接口安全规范**
    - 所有SQL操作采用预编译处理，禁止字符串拼接SQL，杜绝SQL注入风险
    - 接口配置限流、防刷机制，针对高频访问接口设置单位时间请求上限，避免恶意攻击
    - 配置跨域规则，仅允许可信域名访问后端接口，禁止未知来源跨域请求
4.  **内容安全规范**
    - 所有用户生成内容（剧本、评价、个人资料）均需经过审核，配置违规关键词库自动拦截，禁止违规内容上线
    - 定期巡检平台内容，及时清理违规、低俗、侵权内容，保障平台内容生态合规

### 5.2 日常运维操作规范
1.  **每日运维操作**
    - 检查后端服务、Nginx服务、MySQL服务运行状态，确保服务正常运行
    - 查看服务错误日志，及时处理异常报错，避免故障扩大
    - 查看服务器CPU、内存、硬盘、带宽使用率，确保资源充足
    - 处理待审核内容、用户举报、用户反馈问题
2.  **每周运维操作**
    - 执行数据库增量备份，验证备份文件可用性
    - 清理服务器冗余日志文件、临时文件，释放硬盘空间
    - 统计平台核心运营数据，生成周度运营报表
    - 巡检平台功能可用性，确保全流程功能正常
3.  **每月运维操作**
    - 执行数据库全量备份，异地存储备份文件
    - 进行系统安全扫描，修复安全漏洞，更新系统与软件版本
    - 清理数据库逻辑删除的冗余数据，优化数据库表结构与索引
    - 总结月度运营数据，优化平台功能与配置

### 5.3 数据备份与恢复规范
#### 5.3.1 备份策略
1.  **增量备份**：每日凌晨2点执行MySQL binlog增量备份，备份文件存储在服务器本地与OSS对象存储
2.  **全量备份**：每周日凌晨2点执行数据库全量备份，每月1号执行一次全量备份异地归档
3.  **备份文件保留周期**：增量备份文件保留30天，全量备份文件保留1年，关键节点备份文件永久归档
4.  **备份验证**：每周执行一次备份恢复测试，确保备份文件可用，避免备份失效

#### 5.3.2 数据恢复操作
1.  **全量恢复**：
    - 停止后端服务，避免恢复过程中产生新数据
    - 登录MySQL，删除原有数据库，创建新的空数据库
    - 执行全量备份SQL文件，完成数据恢复
    - 验证数据恢复成功后，重启后端服务
2.  **增量恢复**：
    - 先恢复最近一次全量备份文件
    - 基于全量备份时间点，执行对应时间范围内的binlog增量备份文件
    - 验证数据恢复到指定时间点，确认无误后重启服务

---

## 6 常见问题与解决方案
### 6.1 部署类问题
#### 问题1：后端服务启动失败，提示数据库连接失败
**解决方案**：
1.  检查数据库账号密码是否正确，数据库是否开启远程访问权限
2.  检查服务器防火墙是否开放3306端口，数据库是否绑定了正确的IP地址
3.  检查数据库连接URL中的IP、端口、数据库名称是否正确，时区配置是否正常
4.  验证数据库服务是否正常运行，执行`systemctl status mysqld`查看服务状态

#### 问题2：前端页面访问空白，无法加载资源
**解决方案**：
1.  检查Nginx配置中的root路径是否正确，是否指向了前端打包后的dist文件夹
2.  检查前端打包后的文件是否完整上传到服务器，是否有文件缺失
3.  检查Nginx配置中的history模式适配是否正确，是否配置了`try_files $uri $uri/ /index.html;`
4.  检查浏览器控制台是否有跨域报错，调整Nginx反向代理配置

#### 问题3：前端接口请求提示404，无法访问后端接口
**解决方案**：
1.  检查前端配置文件中的后端接口地址是否正确，是否与后端服务IP、端口、context-path匹配
2.  检查Nginx反向代理配置是否正确，proxy_pass地址是否指向了后端服务地址
3.  验证后端服务是否正常运行，接口是否可正常访问，执行curl命令测试接口连通性
4.  检查服务器防火墙是否开放了后端服务端口，是否有端口拦截

### 6.2 操作类问题
#### 问题1：用户注册时提示“用户名/手机号已存在”
**解决方案**：
1.  更换用户名/手机号重新注册，确保账号唯一性
2.  若确认手机号未注册过，可通过短信验证码登录，查看是否已被注册
3.  联系管理员，核实账号注册情况，处理重复注册问题

#### 问题2：游戏过程中AI角色不回复消息
**解决方案**：
1.  检查网络连接是否正常，刷新页面重新进入游戏
2.  确认AI大模型API密钥是否有效，接口是否有调用额度，是否触发接口限流
3.  检查后端服务是否正常运行，AI接口配置是否正确
4.  退出游戏后重新进入，再次发送消息测试

#### 问题3：剧本创作提交审核后，一直处于待审核状态
**解决方案**：
1.  平台剧本审核周期通常为1-3个工作日，可等待审核完成
2.  联系平台管理员，核实剧本审核进度，确认是否存在内容问题
3.  检查剧本内容是否符合平台规范，是否存在违规内容，修改后重新提交审核

### 6.3 系统类问题
#### 问题1：数据库查询缓慢，页面加载卡顿
**解决方案**：
1.  查看数据库慢查询日志，定位慢SQL语句，优化SQL查询逻辑
2.  检查高频查询字段是否创建了索引，补充缺失的索引，清理重复无效索引
3.  优化数据库表结构，统一关联字段类型，避免隐式转换导致索引失效
4.  升级服务器配置，提升数据库运行性能，配置数据库读写分离（高并发场景）

问题2：服务器内存占用过高，服务频繁宕机
**解决方案**：
1.  查看服务器进程占用情况，定位高内存占用的进程，优化服务配置
2.  调整JVM堆内存配置，避免内存溢出，设置合理的垃圾回收策略
3.  清理服务器冗余进程与服务，释放内存资源，升级服务器内存配置
4.  配置服务宕机自动重启机制，避免服务长时间不可用

7 附录
7.1 测试账号说明
数据库初始化完成后，内置10个测试用户账号，所有测试用户统一登录密码为：`123456a`，具体账号如下：
用户名	手机号	用户等级	账号说明
剧遇小萌新	13800138001	2	新手测试账号
剧本推土机	13800138002	5	进阶测试账号
情感水龙头	13800138003	3	情感本测试账号
恐怖坦克	13800138004	4	恐怖本测试账号
欢乐喜剧人	13800138005	2	欢乐本测试账号
硬核侦探	13800138006	6	硬核本测试账号
古装爱好者	13800138007	3	古风本测试账号
机制老骗子	13800138008	5	机制本测试账号
新手小白	13800138009	1	纯新手测试账号
全能玩家	13800138010	7	全功能测试账号


7.2 数据库SQL脚本说明
脚本文件名	脚本用途	执行顺序
01-create-database.sql	数据库创建与核心表结构创建	1
02-init-test-data.sql	测试用户、测试剧本、基础数据初始化	2
03-index-optimize.sql	索引创建、字段优化、约束补充	3
04-admin-init.sql	超级管理员账号初始化	4
05-data-clean.sql	测试数据清理脚本（上线前执行）	可选


